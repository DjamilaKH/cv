{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let FormmcvComponent = class FormmcvComponent {\n  constructor(formBuilder, router, dialog, cvService, route) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.dialog = dialog;\n    this.cvService = cvService;\n    this.route = route;\n    this.filteredSecteurs = [];\n    this.countries = ['Tunisie', 'France', 'Allemagne'];\n    this.regions = ['Berlin', 'Lyon', 'Nice', 'Versailles', 'Tours', 'Paris', 'Toulouse', 'Strasbourg', 'Nantes', 'Tunis', 'Siliana', 'Jendouba', 'Kef', 'Sfax', 'Beja', 'Sousse', 'Monastir', 'Zaghouan', 'Nabeul', 'Munich', 'Hambourg', 'Francfort', 'Cologne'];\n    this.options = ['Temps plein', 'Temps partiel'];\n    this.selectedOption = '';\n    this.contrat = ['CDI', 'CDD', 'Freelance', 'Alternance'];\n    this.selectedContrat = '';\n    this.filteredConnaissances = [];\n    this.connaissancesList = [];\n    this.message = '';\n    this.cvForm = this.formBuilder.group({\n      photoCv: [''],\n      nom: [''],\n      prenom: [''],\n      email: [''],\n      telephone: [],\n      titCV: ['', Validators.required],\n      profilCv: [''],\n      // sectCom: [''],\n      // domaCom: [''],\n      // comp: [''],\n      // typCont: [''],\n      // regiTrava: [''],\n      // payLTS: [''],\n      // regiLTS: [''],\n      objecCarri: ['']\n    });\n  }\n  ngOnInit() {\n    this.message = '';\n    this.isAddCv = this.router.url.includes('add');\n    this.isEditCv = this.router.url.includes('edit');\n    // mapboxgl.accessToken = 'pk.eyJ1Ijoibm91cmlqYW0iLCJhIjoiY2xqeTVhcTRrMDF1djN0bnp6OXp0dW1tcCJ9.USTPHwYjnvdicDrPAv0PcQ';\n    // const map = new mapboxgl.Map({\n    //   container: 'map',\n    //   style: 'mapbox://styles/mapbox/streets-v11',\n    //   center: [0, 0], \n    //   zoom: 1 \n    // });\n    // this.onCountrySelect();\n  }\n  // onCountrySelect() {\n  //   const coordinates = this.getCoordinatesForCountry(this.selectedCountry, this.selectedRegion);\n  //   if (coordinates) {\n  //     const map = new mapboxgl.Map({\n  //       container: 'map',\n  //       style: 'mapbox://styles/mapbox/streets-v11',\n  //       center: coordinates, \n  //       zoom: 10 \n  //     });\n  //   }\n  // }\n  Submit() {\n    this.cv = this.cvForm.value;\n    if (this.isAddCv) {\n      this.cvService.create(this.cv).subscribe({\n        next: res => {\n          console.log(res);\n          this.router.navigate(['/']);\n        },\n        error: e => console.error(e)\n      });\n    } else if (this.isEditCv) {\n      this.cvService.update(this.cv).subscribe(cv => {\n        if (cv) {\n          this.router.navigate(['/cv', cv.id]);\n        }\n      });\n    }\n  }\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.avatarPreview = reader.result;\n        this.cvForm.controls['photoCv'].setValue(this.avatarPreview);\n      };\n    }\n  }\n};\n__decorate([Input()], FormmcvComponent.prototype, \"cv\", void 0);\nFormmcvComponent = __decorate([Component({\n  selector: 'app-formmcv',\n  templateUrl: './formmcv.component.html',\n  styleUrls: ['./formmcv.component.css']\n})], FormmcvComponent);","map":{"version":3,"names":["Component","Input","Validators","FormmcvComponent","constructor","formBuilder","router","dialog","cvService","route","filteredSecteurs","countries","regions","options","selectedOption","contrat","selectedContrat","filteredConnaissances","connaissancesList","message","cvForm","group","photoCv","nom","prenom","email","telephone","titCV","required","profilCv","objecCarri","ngOnInit","isAddCv","url","includes","isEditCv","Submit","cv","value","create","subscribe","next","res","console","log","navigate","error","e","update","id","onFileSelected","event","file","target","files","reader","FileReader","readAsDataURL","onload","avatarPreview","result","controls","setValue","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\nourijam\\Desktop\\cv-angular-nodejs-postgresql\\src\\app\\components\\formmcv\\formmcv.component.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Cv } from 'src/app/models/cv.model';\nimport { CvService } from 'src/app/service/cv.service';\n\n@Component({\n  selector: 'app-formmcv',\n  templateUrl: './formmcv.component.html',\n  styleUrls: ['./formmcv.component.css']\n})\nexport class FormmcvComponent {\n  @Input() cv!: Cv;\n  cvForm!: FormGroup;\n  isAddCv!: boolean;\n  isEditCv!:boolean;\n  selectedDomaine!: string;\n  selectedSecteur!: string | null;\n  filteredSecteurs: string[] = [];\n  selectedCountry!: string;\n  selectedRegion!: string;\n  countries: string[] = ['Tunisie', 'France','Allemagne'];\n  regions: string[] = ['Berlin', 'Lyon', 'Nice', 'Versailles', 'Tours', 'Paris', 'Toulouse','Strasbourg', 'Nantes', 'Tunis', 'Siliana', 'Jendouba', 'Kef', 'Sfax', 'Beja', 'Sousse', 'Monastir', 'Zaghouan', 'Nabeul', 'Munich', 'Hambourg', 'Francfort', 'Cologne' ];\n  \n  \n  options: string[] = ['Temps plein', 'Temps partiel']; \n  selectedOption: string = ''; \n  contrat: string[] =['CDI','CDD','Freelance','Alternance'];\n  selectedContrat: string = ''; \n  exForm!: FormGroup ;\n  filteredConnaissances: string[] = [];\n  connaissancesList: any[] = [];\n  id: any;\n  message = '';\n\n  constructor(private formBuilder: FormBuilder,private router: Router,private dialog: MatDialog,private cvService: CvService,private route: ActivatedRoute,) { \n    this.cvForm = this.formBuilder.group({\n      photoCv: [''],\n      nom: [''],\n      prenom: [''],\n      email: [''],\n      telephone: [],\n      titCV: ['', Validators.required],\n      profilCv: [''],\n      // sectCom: [''],\n      // domaCom: [''],\n      // comp: [''],\n      // typCont: [''],\n      // regiTrava: [''],\n      // payLTS: [''],\n      // regiLTS: [''],\n      objecCarri: [''],\n    });\n  }\n  \n  ngOnInit() {\n    this.message = '';\n    this.isAddCv=this.router.url.includes('add')\n    this.isEditCv=this.router.url.includes('edit')\n\n    // mapboxgl.accessToken = 'pk.eyJ1Ijoibm91cmlqYW0iLCJhIjoiY2xqeTVhcTRrMDF1djN0bnp6OXp0dW1tcCJ9.USTPHwYjnvdicDrPAv0PcQ';\n    // const map = new mapboxgl.Map({\n    //   container: 'map',\n    //   style: 'mapbox://styles/mapbox/streets-v11',\n    //   center: [0, 0], \n    //   zoom: 1 \n    // });\n  \n    // this.onCountrySelect();\n  \n  \n  }\n  // onCountrySelect() {\n  //   const coordinates = this.getCoordinatesForCountry(this.selectedCountry, this.selectedRegion);\n  //   if (coordinates) {\n  //     const map = new mapboxgl.Map({\n  //       container: 'map',\n  //       style: 'mapbox://styles/mapbox/streets-v11',\n  //       center: coordinates, \n  //       zoom: 10 \n  //     });\n  //   }\n  // }\n  \n  Submit() {\n    this.cv = this.cvForm.value;\n    if (this.isAddCv) {\n      this.cvService.create(this.cv).subscribe({\n        next:(res)=>{\n          console.log(res);\n\n          \n          this.router.navigate(['/']);\n\n        },\n        error: (e) => console.error(e)\n      })\n          \n    }\n    else if(this.isEditCv)  {\n      this.cvService.update(this.cv).subscribe((cv)=>{\n        if(cv){this.router.navigate(['/cv', cv.id])}\n      });\n       \n    }\n  \n  }\n  \n  avatarPreview: any | undefined;\n  onFileSelected(event: any) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.avatarPreview = reader.result as any;\n        this.cvForm.controls['photoCv'].setValue(this.avatarPreview);\n      };\n    }\n  }\n  \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}