{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let FormmcvComponent = class FormmcvComponent {\n  constructor(formBuilder, router, cvService, route) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.cvService = cvService;\n    this.route = route;\n    this.loading = false;\n    this.submitted = false;\n    this.cvForm = this.formBuilder.group({\n      nom: ['', Validators.required],\n      prenom: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      telephone: ['', [Validators.required, this.validateTelephoneFormat]],\n      titCV: ['', Validators.required],\n      profilCv: ['', Validators.required],\n      objecCarri: ['', [Validators.required]]\n    });\n  }\n  ngOnInit() {\n    this.iseditCv = this.router.url.includes('edit');\n    this.id = this.route.snapshot.params['id'];\n    this.isAddCv = this.router.url.includes('add');\n  }\n  validateTelephoneFormat(control) {\n    const phoneNumberPattern = /^\\d{2}-\\d{3}-\\d{3}$/;\n    if (control.value && !phoneNumberPattern.test(control.value)) {\n      return {\n        'telephoneFormat': true\n      };\n    }\n    return null;\n  }\n  Submit() {\n    if (this.isAddCv) {\n      this.cvService.create(this.cv).subscribe(cv => this.router.navigate(['/cv', cv.id]));\n    } else {\n      this.cvService.update(this.cv).subscribe(() => this.router.navigate(['/cv', this.cv.id]));\n      this.router.navigate(['/cv', this.cv.id]);\n    }\n  }\n};\n__decorate([Input()], FormmcvComponent.prototype, \"cv\", void 0);\nFormmcvComponent = __decorate([Component({\n  selector: 'app-formmcv',\n  templateUrl: './formmcv.component.html',\n  styleUrls: ['./formmcv.component.css']\n})], FormmcvComponent);","map":{"version":3,"names":["Component","Input","Validators","FormmcvComponent","constructor","formBuilder","router","cvService","route","loading","submitted","cvForm","group","nom","required","prenom","email","telephone","validateTelephoneFormat","titCV","profilCv","objecCarri","ngOnInit","iseditCv","url","includes","id","snapshot","params","isAddCv","control","phoneNumberPattern","value","test","Submit","create","cv","subscribe","navigate","update","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\nourijam\\Desktop\\cv-angular-nodejs-postgresql\\src\\app\\components\\formmcv\\formmcv.component.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Cv } from 'src/app/models/cv.model';\nimport { CvService } from 'src/app/service/cv.service';\n@Component({\n  selector: 'app-formmcv',\n  templateUrl: './formmcv.component.html',\n  styleUrls: ['./formmcv.component.css']\n})\nexport class FormmcvComponent implements OnInit {\n  @Input() cv!:Cv\n  cvForm!: FormGroup;\n  isAddCv!: boolean;\n  loading = false;\n  submitted = false;\n  id: any;\n  iseditCv!: boolean;\n  constructor(private formBuilder: FormBuilder,\n    private router: Router,\n    private cvService: CvService,\n    private route: ActivatedRoute,) { \n      this.cvForm = this.formBuilder.group({\n        nom: (['', Validators.required]) ,\n        prenom:(['', Validators.required]),\n        email:  (['', [Validators.required, Validators.email]]),\n        telephone:(['', [Validators.required, this.validateTelephoneFormat]]),\n        titCV: (['', Validators.required]),\n        profilCv: (['', Validators.required]),\n        objecCarri: (['', [Validators.required]]),\n      });\n       } \n  ngOnInit() {\n    this.iseditCv=this.router.url.includes('edit')\n    this.id = this.route.snapshot.params['id'];\n    this.isAddCv=this.router.url.includes('add')\n  }\n  validateTelephoneFormat(control: AbstractControl): { [key: string]: boolean } | null {\n    const phoneNumberPattern = /^\\d{2}-\\d{3}-\\d{3}$/;\n    if (control.value && !phoneNumberPattern.test(control.value)) {\n      return { 'telephoneFormat': true };\n    }\n    return null;\n  }  \n  Submit() {\n    if (this.isAddCv) {\n      this.cvService.create(this.cv)   \n      .subscribe((cv:Cv)=>this.router.navigate(['/cv',cv.id]))      \n    }\n    else {\n      this.cvService.update(this.cv).subscribe(()=>this.router.navigate(['/cv',this.cv.id]),\n      ); \n    this.router.navigate(['/cv', this.cv.id])\n  } \n    }\n\n     // *****edit  ({\n      //   next: (cv) => {\n      //     console.log(cv);\n      //   },\n      //   error: (e) => console.error(e)\n      // })\n      \n    // ****** add {\n      //   next:(res)=>{\n      //     console.log(res);\n\n          \n      //     this.router.navigate(['/']);\n\n      //   },\n      //   error: (e) => console.error(e)\n      // }\n  \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}